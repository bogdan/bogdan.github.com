<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

    <title>
      
      Bogdan's blog
    </title>
    <meta name="robots" content="follow, all" />
    <meta name="description" content="This is personal blog of Bogdan Gusiev: ruby on rails developer, open source contributor">
    <meta name="keywords" content="activerecord, api, application, bdd, behavior, context, criticism, database, debug, dry, gem, howto, html, idea, java, javascript, named_scope, pattern, programming, query, rails, rspec, ruby, sql, test, usability, vim" />
    <link rel="stylesheet" href="/css/default.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/css/highlight.css" type="text/css" media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Bogdan Gusiev's blog RSS Feed" href="http://feeds.feedburner.com/BogdanGusiev" />
    <link rel="shortcut icon" href="/images/favicon.ico"/>
    <link rel="icon" href="/images/favicon.ico"/>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                var params = decodeURI(window.location.search).replace(/^\?/, "").split("&");
                $(params).each(function(index, param) {
                    if (param.match(/^p=/)) {

                        switch(parseInt(param.split("=")[1])) {
                            case 11: window.location.href = "http://www.gusiev.com/2009/04/clear-upload-file-input-field/";
                            break;
                            case 3: window.location.href = "http://www.gusiev.com/2009/04/upload-files-with-selenium-ide/";
                            break;
                        }
                    }
                })
            });
        </script>
    </head>

    <body>
        <a href="http://github.com/bogdan" class="fork">
            <img src="/images/fork.png"/>
        </a>

        <div id="wrapper">

            <div class="header">
                <div class="title">
                    <h1><a href="/">Bogdan Gusiev's blog</a></h1>
                    <h4>How to make your Ruby on Rails application</h4>
                </div>

                <div class="pages">
                    <a href="/">Home</a>
                    <a href="/pages/about.html">About me</a>
                    <a href="/pages/contacts.html">Contacts</a>
                </div>
                <a href="/pages/about.html" class="avatar">
                    <img src="/images/me.jpg"/>
                </a>
                <div class="clear"></div>
                <hr/>
            </div> <!-- Closes header -->


            <div id="main">

                <div id="content">
                    
    <div class="post">
        <h2>
            <a href='/2010/09/good-passwords-theory'>Good passwords theory</a>
            <div class="date">30 Sep 2010</div>
        </h2>
        All of us are using passwords and most of us are typing them several times a day. And everyone knows the criteria to generate a good password. Random passwords are very strong from protection point of view but not from usability point of view. 
No body think about password unforgettable-ness and less-painful-to-type-ness. I saw many passwords that are very painful because they are just random. 

And I think it's nice to lose some randomness and make it easier to type and remember.
There is still a lot of enough strong passwords that match this criteria as well. 
<!--
<br/>
Try to type and remember something like:
<pre><code>sudosuamigo1;
s3host-large
you&me2gether</code></pre>
Instead of:
<pre><code>1aWhuyZ
!nzu?Us0
n]1m!uaA</code></pre>
 
And you feel much better.
-->
        <h4 class="tags">
    
    <a href="/tags/usability.html">usability</a>
    
    <a href="/tags/password.html">password</a>
    
    <a href="/tags/security.html">security</a>
    
    <a href="/tags/random.html">random</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/08/populate-db-pattern-fake-data'>Populate database pattern - why is it so cool?</a>
            <div class="date">26 Aug 2010</div>
        </h2>
        Once my co-worker propose an idea to fill database with some fake data because we didn't have a  gui forms yet and we have to show something that works to customer. That was a start for great pattern - <strong>populator</strong>.
<!--

<h3>Advantages</h3>
Later we didn't drop that functionality because it was helpful for everyone to always see what's new appear in application. And we find more and more useful aspects of having populator. It was so easy to attach new people to project because we deliver a short set of data within a source code that demonstrates everything we have in our app. Now whole team has a full data set and see if any page doesn't work because of a side effect. Frontend people feel more comfortable with populator because they don't care of how to create many assets in order to see pagination and things like that . Also UI issues became easier to detect because every element present on a screen for every person letting him detect browser specific bugs. 

<h3> Implementation</h3>

I won't recommend any specific library to populate the db except the one to generate fake(Lorem ipsum) content. We prefer <a href="http://github.com/stympy/faker">Faker</a> but that is up to personal choice.
Important note is that inserting data directly into db is bad idea because all application logic is ignored in this case: validation will be ignored and counters cache might be broken. That is why Populate gem is not recommended.<br/><br/>
One nice improvement we made is pass _SCALE_ parameter to populator in order to control how many objects should be generated. Use minimal amount if you need to test that populator works and regular amount to get working system.<br/>
Another good idea is soft save(ignore if not valid) and output the number of created objects after at the end. This letting you if something went wrong during populate process.<br/>
<br/>
Here is an example of how it may look like:
<pre><code>User.transaction do
  # apply the SCALE parameter to the argument. 
  # Default SCALE is 10 so 10 * 1 = 10. 
  # Generate 10 users by default
  scale(1).times do 
    user = User.new
    user.email = Faker::Internet.email
    user.first_name = Faker::Name.first_name
    user.last_name = Faker::Name.last_name
    user.password = user.password_confirmation = 'monkey'
    user.save # this may be false in case of uniqueness restriction or other problems
  end
end


users = User.all
puts "Users: #{users.count}" # make sure we actually made some users </code></pre>

<h3>At the end</h3>
I beleive that Populator should be a part of the build of every project. Yes, it needs some support but in fact it saves lots and lots of time.
-->
        <h4 class="tags">
    
    <a href="/tags/database.html">database</a>
    
    <a href="/tags/ruby.html">ruby</a>
    
    <a href="/tags/pattern.html">pattern</a>
    
    <a href="/tags/populate.html">populate</a>
    
    <a href="/tags/fake.html">fake</a>
    
    <a href="/tags/data.html">data</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/07/bdd-rspec-matcher-to-test-named_scope-scoped-rails-3'>Ultimate rspec matcher to test named_scope or scoped</a>
            <div class="date">11 Jul 2010</div>
        </h2>
        After having a good practice on using <a href="http://gusiev.com/2010/06/ultimate-rspec-matcher-to-test-validation/">Ultimate rspec matcher to test validation</a> I think it's time to implement one for testing named scopes - custom finders. Testing these finders is daily task. Here is how it can be done with minimum amount of code and maximum readability.
<!--
<h3>Discovery <del>(Animal Planet)</del></h3>

What do we expect from the custom finder?
We expect that it should find assets A, B, C and should not find assets D, E, F.
And sometimes the order is important: it should find A, B C with exact order.

With respect to <em>let</em> rspec feature let's take an example: Product has and belongs to many categories. We need to have a scope to filter products within the specified category:

<pre><code>describe "#by_category_id" do
      let(:given_category) do 
        Factory.create(:given_category)
      end
 

      let(:product_in_given_category) do
        Factory.create(
          :product,
          :categories => [category]
        )
      end

      let(:product_not_in_given_category) do
        Factory.create(
          :product,
          :categories => [Factory.create(:category)]
        )
      end

      # This might be tricky to redefine subject as the finder result
      # but in this way we can delegate the matcher to subject and 
      # avoid writing test descriptions.
      subject { Product.by_category_id(given_category.id) }

      it { should discover(product_in_given_category) }
      it { should_not discover(product_not_in_given_category) }

    end
</code></pre> 

Factory girl was used in this example because factories kickass when we test finders. As you can see the example has a perfect readability with no one line of plain English text. I didn't include the description in my examples but you can easily make them if they make sense for you.<br/>
Note: Be aware of the lazy loading of your finder. <em>let</em> is initialized lazy too. You should make sure it is called before the actual query to the database.
If you don't want to care about lazy loading their is <em>let!</em> method that could be easily copy-pasted from Rspec 2.0. Unlike <em>let</em> it doesn't have lazy initialization:
<pre><code>def let!(name, &block)
  let(name, &block)
  before { __send__(name) } 
end
</code></pre>

<h3>Testing sort order</h3>

If the ordering is done in non-trivial way let's <em>discover.with_exact_order</em>. 
<pre><code>describe "#most_commented named scope" do
  let(:uncommented_post) { Factory.create(:post)}
  let!(:less_commented_post) { Factory.create(:post, :comments => [Factory.build(:comment)])}
  let!(:more_commented_post) { 
    Factory.create(:post, :comments => [Factory.build(:comment), Factory.build(:comment)])}
  }

  subject { described_class.most_commented }
 it {should discover(more_commented_post, less_commented_post).with_exact_order }
 it {should_not discover(uncommented_post) }
end</code></pre>

Be careful with default order. MySQL and Postgres sort objects as they were created by default.
That is why generate objects in reverse order e.g. <em>less_commented_post</em> before <em>more_commented_post</em> is important to make sure that ordering is your code behavior rather than default db behavior.
 
<h3> Summary </h3>
I 've add this matcher to the <a href="http://gusiev.com/2010/06/ultimate-rspec-matcher-to-test-validation/">previous one</a>. Both matchers are available here <a href="http://github.com/bogdan/accept_values_for">accept_values_for</a>. Let's start thinking of what else we can do.
-->
        <h4 class="tags">
    
    <a href="/tags/bdd.html">bdd</a>
    
    <a href="/tags/rspec.html">rspec</a>
    
    <a href="/tags/activerecord.html">activerecord</a>
    
    <a href="/tags/named_scope.html">named_scope</a>
    
    <a href="/tags/matcher.html">matcher</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/06/ultimate-rspec-matcher-to-test-validation'>Ultimate rspec matcher to test validation</a>
            <div class="date">30 Jun 2010</div>
        </h2>
        After a first thousand of tests using Rspec I fount it very annoying to repeat my self testing the standard code as spec code is usually twice longer than code it test. I've started to look for a way to simplify the patterns and make it reusable. Among other nice rspec tricks there is possibility to write custom Rspec matchers. Spec the validation is just two lines of code for each attribute now.
<!--


<h3> Existing solutions </h3>
After doing some search around I found Shoulda and remarkable gems that provide a way of doing this. Here is one of remarkable variant (others are just ugly): 
<pre><code>it { should validate_numericality_of(:age, :greater_than => 18, :only_integer => true) }</code></pre>
But that is huge contradiction with BDD methodology because it doesn't make you think about behavior. People use to copy-paste code from model to spec and all possible bugs within. As the result <strong>nothing is tested</strong>... I don't even say about "test first".

<h3> Easy DSL and Implementation </h3>
When I implement validation everything I care about is: what values should be accepted and what values should not. An easy DSL that realize this pattern would be:
<pre><code>describe User do
  it { should accept_values_for(:email, "john@example.com", "lambda@gusiev.com") }
  it { should_not accept_values_for(:email, "invalid", nil, "a@b", "john@.com") }
end</code></pre> 
That's it! Two lines of code per attribute. And that is perfectly fine for "test first" principle.<br/>
Rspec authors take care about custom Rspec matcher. So the implementation is very easy.
Fork me on github: <a href="http://github.com/bogdan/accept_values_for">accept_values_for rpec matcher</a>. The <strong>accept_values_for</strong> pattern is a true BDD way and unlike Remarkable it really do testing.

<h3> validates_uniqueness_of </h3> 
This is very special validation because you always need more then one record to test it. So, the pattern for uniqueness validation is:
<pre><code>describe User do
  context "if user with email 'aa@bb.com' exists" do
    before do
      User.create!(@valid_attributes.merge(:email =&gt; 'aa@bb.com')
    end
    it { should_not accept_values_for(:email, "aa@bb.com") }
  end
end</code></pre>
<h3> Summary </h3>
Custom matcher is just 50 lines of code that make your life much easier. Do not scare to write your own. Custom matcher to test ActiveRecord#named_scope coming soon.
-->
        <h4 class="tags">
    
    <a href="/tags/rspec.html">rspec</a>
    
    <a href="/tags/rails.html">rails</a>
    
    <a href="/tags/activerecord.html">activerecord</a>
    
    <a href="/tags/validation.html">validation</a>
    
    <a href="/tags/pattern.html">pattern</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/06/nesting-namespace-route-non-flat-controllers-hierarchy-rails'>Advanced non-flat controllers hierarchy with rails</a>
            <div class="date">08 Jun 2010</div>
        </h2>
        REST became the best practice for organizing CRUD server side interface. 
But what to do when we have something more than hello-world application that 
goes forward from data CRUD and provides many presentations 
of the same data with different filters and different layouts?
<!--
<br/>

<h3>How the flat controller architecture goes to hell</h3>

Starting from REST-full controller people use to stick to them and add more and more actions to the same class. And that is how the controller code goes to hell:

<pre><code>class UsersController &lt; ApplicationController
#
# Filters
#
skip_before_filter :check_user_is_valid, :only =&gt; [:edit, :update]
before_filter :require_user, :only =&gt; [
:update, :edit, :settings, :disconnect_twitter, :connect_facebook_account, :google_contacts
]

before_filter :load_user, :except =&gt; [
:index, :new, :create, :remote_validate_email, :autocomplete_for_user_full_name,
:remote_validate_facebook_uid, :google_contacts
]

before_filter :check_permissions, :only =&gt; [ :edit, :update, :settings, :update_photo, :connect_facebook_account ]

before_filter :load_invitation, :only =&gt; [:new, :create]
before_filter :ensure_authenticated_to_facebook, :only =&gt; :connect_facebook_account
before_filter :initialize_form, :only =&gt; [:edit]

#
# And 20 almost independent actions goes here
# And the twice longer tests file for this controller
#

end
</code></pre>

<h3> Namespaces and nesting </h3>
The root of the problem is in ignoring the following simple rule:
<strong>The default choice for implementing new feature is do it in other controller</strong>
It's always better to have 20 controllers with one action then one controller with 20 actions.
Usually there is no compromise variant. And 20 controllers with one action ain't as bad as you imagine.<br/>
<br/>

In order to handle the large number of controller we are actively using the namespaces and nested resources features. Let me give an example: User has many projects, Project belongs to category. We need to list projects per user and per category. In the flat hierarchy you would be confused but namespaces and nesting solves the problem.<br/>

<pre><code>map.resources :categories do |c|
  c.namespace :categories do |categories|
    categories.resouces :projects
  end
end
map.resources :users do |u|
  c.namespace :users do |users|
    users.resouces :projects
  end
end

class Categories::ProjectsController

  def index
    @projects = ....
  end
end

class Users::ProjectsController

  def index
    @projects = ....
  end
end</code></pre>


Everyone heard about restful authentication but not so many people applied this idea to other not so restful from the first sight things. Like TwitterConnectionController:

<pre><code>class Users::TwitterConnectionController < ApplicationController

  def create
  end

  def destroy
  end
end</code></pre>

Many people will be pushing all such staff to UsersController until their editors would run out of memory.

<h3>Out of scope</h3>

State control actions are not in REST but should be one day. Placing them in the same controller with CRUD is generally a good idea:

<pre><code>class ArticlesController 

  def {new, create, update, edit, destroy}
  end

  def publish
    @article.publish!
    redirect_to articles_path
  end

end</code></pre>

<h3>Some sugar from generators</h3>

Rails <em>generate</em> script supports namespaces very well:
<pre><code>$ ./script/generate <del>rspec_</del>controller users/categories
      create  app/controllers/users
      create  app/helpers/users
      create  app/views/users/categories
      create  spec/controllers/users
      create  spec/helpers/users
      create  spec/views/users/categories
      create  spec/controllers/users/categories_controller_spec.rb
      create  spec/helpers/users/categories_helper_spec.rb
      create  app/controllers/users/categories_controller.rb
      create  app/helpers/users/categories_helper.rb</code></pre>

And classes created in appropriate namespace and folder as well as specs for them.
The only one thing you should do manually is add routes. 

<h3>Drawbacks</h3>

Every engeneering solution has it's drawbacks. While you have different controllers that operates on the same classes you might need to reuse functionality among them.
I preffer to solve it by mixing in a module:
<pre><code>class Users::ProjectController

 include UserNestedResource

end</code></pre>

Some people use inheritance instead. Both ways are almost the same. Nothing hard here as well.

<h3>Summary</h3>

At the end I 'll just repeat it again:<br/> 
Default policy for placing two actions that has some kind of connection is <strong>SPLIT</strong>.
-->
        <h4 class="tags">
    
    <a href="/tags/ruby.html">ruby</a>
    
    <a href="/tags/rails.html">rails</a>
    
    <a href="/tags/controller.html">controller</a>
    
    <a href="/tags/route.html">route</a>
    
    <a href="/tags/architecture.html">architecture</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/04/dom-element-class-html-javascript-reference'>DOM element class - css reference or javascript reference?</a>
            <div class="date">20 Apr 2010</div>
        </h2>
        Designer have used element class attribute for CSS styling for ages. Nowadays classes are also used in javascript selectors. This overlapping cause additional problems: Changes in js may cause broken design and changes in design may cause broken js. The last one may be hard to detect especially when design and css are handled by different person.
<!--
<hr/>
Element class seems the best way to query the element from DOM in js code. Other variants like it's relative possition to other elements are very fragile. Let's say that we have the following DOM:
<pre><code>&lt;a&gt; Delete&lt;/a&gt;
&lt;a&gt; Edit&lt;/a&gt;</code></pre>
And both links are handled with javascript. How would you separate them? 
<ul>
	<li><strong>By order</strong>(first, second) will cause problems if designer would like to change the order.</li>
	<li><strong>By id</strong> will fail if you would have a list of elements where each has these links</li>
	<li><strong>By label</strong> is just a fuck up and won't work for multi language application</li>
</ul>
The only one variant that provide the best stability is reference <strong>By class</strong>.
But as stated above class also serves for another purpose - styling. 

The thing that might help is a special prefix(for example "js") for all 'JavaScript classes'.
Like:
<pre><code>&lt;a class="js-new-comment big-blue-button"&gt; New Comment &lt;/a&gt;</code></pre>

And the convention that classes with prefix should only be used in javascript selectors and classes without prefix in CSS.
<br/><br/>
Yes, sometimes it may look like:
<pre><code>&lt;input type='button' class="js-follow-button follow-button"&gt; Follow this person &lt;/input&gt;</code></pre>
But that makes sense to eliminate maintenance problem described above.
-->
        <h4 class="tags">
    
    <a href="/tags/javascript.html">javascript</a>
    
    <a href="/tags/html.html">html</a>
    
    <a href="/tags/dom.html">dom</a>
    
    <a href="/tags/css.html">css</a>
    
    <a href="/tags/class.html">class</a>
    
    <a href="/tags/element.html">element</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/04/ruby18-private-protected-incapsulatio'>Encapsulation in Ruby: 'private' doesn't give expected level of privacy</a>
            <div class="date">05 Apr 2010</div>
        </h2>
        The classic OOP pattern usually called encapsulation implemented in ruby with <code>private</code> and <code>protected</code> <del>keywords</del> methods. The distinction between API and implementation works great with both. The problem is that <code>private</code> doesn't hide method for inherited classes. 
<!--
<hr/>
See the simple example below:

<pre><code>
class A
  private
  def implementation
    puts 'private A'
  end
end

class B < A
  def api
    implementation
  end
end

B.new.api
</code></pre>

And we won't get exception at the last line.<br/>
So, in fact <code>private</code> do not do what you expect it to do. Use cases that distinguish <code>private</code> and <code>protected</code> are more specific.
At first: <code>implementation</code> method can not be called like <code>self.implementation</code> even from class A.
<pre><code>class A
  def api
    self.implementation #exception here
  end
  private
  def implementation
    puts 'private A'
  end
end

A.new.api
</code></pre>
Seamless pure gap. You can do such call if the method would be protected. Can't imagine the case when this limitation is useful. <br/>
<br/>
The second difference is a bit esoteric. Two instances of the same class can access protected methods of each other but not private methods.

<pre><code>class A
  def api(another) #suppose to receive an instance of a
    implementation == another.implementation
  end
  protected
  def implementation
    puts 'private A'
  end
end
A.new.api(A.new)
</code></pre>

Fine for <code>protected</code> but fail for <code>private</code>. Well, this kind of protection do not make a real because of it's rareness.
<h3>My conclusion: don't use private at all</h3>

You might do any decision on the points above.<br/>
My conclusion is to not use <code>private</code> at all, because it doesn't give the level of privacy that I expect. Difference form <code>protected</code> is so pure that it do not have any real benefits. 


-->
        <h4 class="tags">
    
    <a href="/tags/criticism.html">criticism</a>
    
    <a href="/tags/ruby.html">ruby</a>
    
    <a href="/tags/encapsulation.html">encapsulation</a>
    
    <a href="/tags/privacy.html">privacy</a>
    
    <a href="/tags/method.html">method</a>
    
    <a href="/tags/api.html">api</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/03/quality-develop-application-improve-usability-design'>A dream to develop application that I will use</a>
            <div class="date">29 Mar 2010</div>
        </h2>
        Developing sites for communities you never join, enterprise applications for company you never work in, services you never find useful... a serious problem of IT industry. All misunderstanding between customers and developers come from that reason.
<br/><br/>
It would be so great if we could always feel ourselves as a user of our applications and make  something useful, but not spend time on improving features that won't be familiar. Being a user of the developed application makes it really possible to develop ergonomic and pretty design.
<br/><br/>
Unfortunately most of the companies are ignoring that simple rule and unfortunately in some cases it is hard to follow. But anyway that is the only one way to build the best product.
-->
        <h4 class="tags">
    
    <a href="/tags/application.html">application</a>
    
    <a href="/tags/quality.html">quality</a>
    
    <a href="/tags/design.html">design</a>
    
    <a href="/tags/usability.html">usability</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2010/01/sql-queries-activerecord-rails-named-scopes-stack'>Advanced SQL and named scopes stack with ActiveRecord</a>
            <div class="date">24 Jan 2010</div>
        </h2>
        If you ever work with rails application that is a little bit more complex then a simple CRUD you would know that some of the ActiveRecord magic doesn't work for complex SQL queries. I am primary talking about named scopes stack feature.<br/>
<!--
<hr/>
Let's review the following named_scope that suppose to be usable in different combinations with others:
<pre><code>named_scope :network_of, lambda {|user|
{
:select =&gt; "u.*"
:from =&gt; "users u, followings f1, followings f2",
:conditions =&gt; "f1.follower_id = #{user.id} AND " + 
"f1.followed_id = f2.follower_id AND " +
"f2.followed_id = u.id"
}</code></pre>
It suppose to returns all people that are followed by people that are followed by the given person.
From the SQL point of view that is the simpliest and fastest way to do that with a plain SQL.
But this solution will have some issues with Active Record named scopes stack magic.
See that User.network_for(current_user).all(:limit =>5) will result in SQL exception primary because (:limit => 5) doesn't know about the table alias "users u".
We can not use it in fact.<br/>
The second problem comes to the foreground when we will try to use ActiveRecord features like
User.network_for(current_user).all(:include => :orders). ActiveRecord handles :include in the very different ways and in some cases you will see the SQL exception here as well.<br/>
The problem is that :include sometimes appends some joins to the query that is concatenated to the last table in the :from parameter. To solve that we should make "users" table to be the last one declared in :from parameter.
<pre><code>:select => "users.*"
:from => "followings f1, followings f2, users",
:conditions => "f1.follower_id = #{user.id} AND " + 
"f1.followed_id = f2.follower_id AND " +
"f2.followed_id = users.id"</code></pre>
Summary I would say that using :joins instead of :from/:conditions would give more flexibility and stackability to your named scopes but sometimes :from is more clear and here you got the tip how to use it.
-->
        <h4 class="tags">
    
    <a href="/tags/sql.html">sql</a>
    
    <a href="/tags/query.html">query</a>
    
    <a href="/tags/ruby.html">ruby</a>
    
    <a href="/tags/rails.html">rails</a>
    
    <a href="/tags/activerecord.html">activerecord</a>
    
    <a href="/tags/named_scope.html">named_scope</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>

    <div class="post">
        <h2>
            <a href='/2009/12/vim-as-ruby-on-rails-ide-development-perfomanc'>Vim as IDE - new development era for me</a>
            <div class="date">01 Dec 2009</div>
        </h2>
        I was using Vim to do the minor editing in config files for ages. Vim is advanced on basic navigation and editing operations. However I was always prefer IDE for programming because of it's specific to language navigation('go to definition' feature is awesome!), integrated debugger. But while gaining the experience I noticed that all advanced features began to be less important then basic ones. And you should try Vim if you feel the same.<br/>
<!--
<hr/>

The basic concept of vim is that: Vim think in the same way as you do. For example: I want to delete 'd' everything inside 'i' brackets ')' and vim understands my command: di) <br/>
You shouldn't type a dozen of button to move cursor around and finally delete the selected fragment. 
It's hard to adapt because people are use to think in the way that there text editor do. Vim does vice versa. Some people are saying that they don't like vim because it make them think a lot. That's wrong! Vim is trying to make you free from thinking about editing and concentrate on the content.<br/>

General editing in Vim considered up to every small details. Ask yourself if there is some usual task that I am doing inefficiently and search the Vim feature to optimize that in 3-5 keys. And in ninety nine percent of cases you will find it as built in vim command or a plugin.
-->
        <h4 class="tags">
    
    <a href="/tags/vim.html">vim</a>
    
    <a href="/tags/perfomance.html">perfomance</a>
    
    
</h4>
<div class="clear"></div>

        <hr/>
    </div>


<div class='paginator'>
    
        <div class='next'>
            <a href='/page3'>
                Earlier posts &rarr;
            </a>
        </div>
    
    
        <div class='prev'>
            
                <a href='/'>
                    &larr; Later posts
                </a>
            
        </div>
    
    <div class='clear'></div>
</div>

                </div>
                <div class="vsplit">
                </div>
                <div id="sidebar">
                    <div class="recent-posts">
                        <h2>Recent Posts</h2>
                        <a class="rss" href="http://feeds.feedburner.com/BogdanGusiev">
                            <img src="/images/rss.png" alt="Bogdan Gusiev&#8217;s blog" />
                        </a>
                        <div class="clear"></div>
                        <ul>
                            
                            <li>
                                <a href='/2011/10/resque-plugins-framework-scaling'>Resque-way</a>
                            </li>
                            
                            <li>
                                <a href='/2011/07/rspec-context-behavior-subject-slides'>Advanced RSpec Techniques presentation</a>
                            </li>
                            
                            <li>
                                <a href='/2011/06/ruby-datagrid-gem-report'>Reporting made easy by Datagrid gem for Rails</a>
                            </li>
                            
                            <li>
                                <a href='/2011/05/dbext-vim-table-names-convention-patch'>Patching dbext vim plugin to support Rails naming conventions</a>
                            </li>
                            
                            <li>
                                <a href='/2011/05/http-api-logging-rails'>Logging HTTP api calls just like database queries</a>
                            </li>
                            
                        </ul>
                    </div>
                    <div class="sidebarbox">
                        <h2>Search</h2>
                        <form method="get" id="searchform" action="">
    <input type="text" placeholder="Search keywords" name="s" id="searchbox"/>
    <input type="submit" class="submitbutton" value="Find" />
</form>
<script>
    $('#searchform').submit(function(event) {
    event.preventDefault();
    window.location.href = "http://google.com/search?q=site:gusiev.com " + $('#searchbox').val();
    });
</script>

                    </div>
                    <div class="sidebarbox tag-cloud">
                        <h2>Browse by tags</h2>
                        <a href="/tags/activerecord.html" title="Pages tagged activerecord" style="font-size: 21.2px; line-height:21.2px" rel="tag">activerecord</a> 
<a href="/tags/api.html" title="Pages tagged api" style="font-size: 17.6px; line-height:17.6px" rel="tag">api</a> 
<a href="/tags/application.html" title="Pages tagged application" style="font-size: 17.6px; line-height:17.6px" rel="tag">application</a> 
<a href="/tags/bdd.html" title="Pages tagged bdd" style="font-size: 17.6px; line-height:17.6px" rel="tag">bdd</a> 
<a href="/tags/behavior.html" title="Pages tagged behavior" style="font-size: 19.4px; line-height:19.4px" rel="tag">behavior</a> 
<a href="/tags/context.html" title="Pages tagged context" style="font-size: 17.6px; line-height:17.6px" rel="tag">context</a> 
<a href="/tags/criticism.html" title="Pages tagged criticism" style="font-size: 24.8px; line-height:24.8px" rel="tag">criticism</a> 
<a href="/tags/database.html" title="Pages tagged database" style="font-size: 19.4px; line-height:19.4px" rel="tag">database</a> 
<a href="/tags/debug.html" title="Pages tagged debug" style="font-size: 17.6px; line-height:17.6px" rel="tag">debug</a> 
<a href="/tags/dry.html" title="Pages tagged dry" style="font-size: 17.6px; line-height:17.6px" rel="tag">dry</a> 
<a href="/tags/gem.html" title="Pages tagged gem" style="font-size: 17.6px; line-height:17.6px" rel="tag">gem</a> 
<a href="/tags/howto.html" title="Pages tagged howto" style="font-size: 21.2px; line-height:21.2px" rel="tag">howto</a> 
<a href="/tags/html.html" title="Pages tagged html" style="font-size: 19.4px; line-height:19.4px" rel="tag">html</a> 
<a href="/tags/idea.html" title="Pages tagged idea" style="font-size: 17.6px; line-height:17.6px" rel="tag">idea</a> 
<a href="/tags/java.html" title="Pages tagged java" style="font-size: 21.2px; line-height:21.2px" rel="tag">java</a> 
<a href="/tags/javascript.html" title="Pages tagged javascript" style="font-size: 21.2px; line-height:21.2px" rel="tag">javascript</a> 
<a href="/tags/named_scope.html" title="Pages tagged named_scope" style="font-size: 17.6px; line-height:17.6px" rel="tag">named_scope</a> 
<a href="/tags/pattern.html" title="Pages tagged pattern" style="font-size: 17.6px; line-height:17.6px" rel="tag">pattern</a> 
<a href="/tags/programming.html" title="Pages tagged programming" style="font-size: 21.2px; line-height:21.2px" rel="tag">programming</a> 
<a href="/tags/query.html" title="Pages tagged query" style="font-size: 17.6px; line-height:17.6px" rel="tag">query</a> 
<a href="/tags/rails.html" title="Pages tagged rails" style="font-size: 24.8px; line-height:24.8px" rel="tag">rails</a> 
<a href="/tags/rspec.html" title="Pages tagged rspec" style="font-size: 23.0px; line-height:23.0px" rel="tag">rspec</a> 
<a href="/tags/ruby.html" title="Pages tagged ruby" style="font-size: 26.6px; line-height:26.6px" rel="tag">ruby</a> 
<a href="/tags/sql.html" title="Pages tagged sql" style="font-size: 19.4px; line-height:19.4px" rel="tag">sql</a> 
<a href="/tags/test.html" title="Pages tagged test" style="font-size: 19.4px; line-height:19.4px" rel="tag">test</a> 
<a href="/tags/usability.html" title="Pages tagged usability" style="font-size: 17.6px; line-height:17.6px" rel="tag">usability</a> 
<a href="/tags/vim.html" title="Pages tagged vim" style="font-size: 17.6px; line-height:17.6px" rel="tag">vim</a> 

                    </div>
                </div><!-- Closes Sidebar_full -->
                <div class="clear"></div>
            </div> <!-- Closes Sidebar -->
            <div class="clear"></div>

        </div><!-- Closes Main -->


        <div class="footer">
            <hr/>
            <!--LiveInternet counter-->

            <script type="text/javascript">
                if (window.location.href.indexOf("gusiev") >= 0) {
                document.write("<a href='http://www.liveinternet.ru/click' "+
                        "target=_blank><img src='http://counter.yadro.ru/hit?t40.6;r"+
                        escape(document.referrer)+((typeof(screen)=="undefined")?"":
                            ";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
                                screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
                        ";"+Math.random()+
                        "' alt='' title='LiveInternet' "+
                        "border='0' width='31' height='31'><\/a>");
                }
                </script><!--/LiveInternet-->
                <script type="text/javascript">
                if (window.location.href.indexOf("gusiev") >= 0) {
                    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
                    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
                }
                    </script>
                    <script type="text/javascript">
                if (window.location.href.indexOf("gusiev") >= 0) {
                        try {
                            var pageTracker = _gat._getTracker("UA-12663165-1");
                            pageTracker._trackPageview();
                        } catch(err) {}
                }</script>

            <div style="text-align: center; padding-right: 350px">
                The Content of this blog can be published anywhere with the link to original source.
            </div>
        </div><!-- Closes morefoot -->




    </body>
</html>



